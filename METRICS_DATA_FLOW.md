# MQTT Bridge Metrics Data Flow

## ğŸ“¡ System Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         MQTT BRIDGE (Cloud Run)                      â”‚
â”‚                                                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”‚
â”‚  â”‚   MQTT Client    â”‚â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚  Message Buffer  â”‚                 â”‚
â”‚  â”‚  (HiveMQ Cloud)  â”‚         â”‚  (In-Memory Map) â”‚                 â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â”‚
â”‚         â”‚                              â”‚                             â”‚
â”‚         â”‚ messages                     â”‚ flush every 5s             â”‚
â”‚         â–¼                              â–¼                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”‚
â”‚  â”‚ Message Handler  â”‚â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚  Pub/Sub Client  â”‚                 â”‚
â”‚  â”‚  (handleMQTT)    â”‚         â”‚ (Circuit Breaker)â”‚                 â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â”‚
â”‚         â”‚                              â”‚                             â”‚
â”‚         â”‚                              â”‚                             â”‚
â”‚         â–¼                              â–¼                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚
â”‚  â”‚            METRICS TRACKING STATE                â”‚               â”‚
â”‚  â”‚  â€¢ received      (incremented on buffer add)     â”‚               â”‚
â”‚  â”‚  â€¢ published     (incremented on pub success)    â”‚               â”‚
â”‚  â”‚  â€¢ failed        (incremented on pub failure)    â”‚               â”‚
â”‚  â”‚  â€¢ flushes       (incremented on buffer flush)   â”‚               â”‚
â”‚  â”‚  â€¢ circuitBreakerOpen (circuit breaker state)    â”‚               â”‚
â”‚  â”‚  âŒ commands     (NEVER INCREMENTED - UNUSED)   â”‚               â”‚
â”‚  â”‚  âŒ messagesInDLQ (NEVER INCREMENTED - UNUSED)  â”‚               â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚
â”‚         â”‚                              â”‚                             â”‚
â”‚         â–¼                              â–¼                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”‚
â”‚  â”‚  /health         â”‚         â”‚  /status         â”‚                 â”‚
â”‚  â”‚  Endpoint        â”‚         â”‚  Endpoint        â”‚                 â”‚
â”‚  â”‚  (Port 8080)     â”‚         â”‚  (Port 8080)     â”‚                 â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â”‚
â”‚         â”‚                              â”‚                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚                              â”‚
          â”‚ HTTP GET every 2s            â”‚ HTTP GET every 2s
          â”‚                              â”‚
          â–¼                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   ADMIN DASHBOARD (React/Vite)                       â”‚
â”‚                                                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚         useMqttBridgeStatus Hook (Polling)                    â”‚  â”‚
â”‚  â”‚  â€¢ Fetches /health every 2s                                   â”‚  â”‚
â”‚  â”‚  â€¢ Fetches /status every 2s                                   â”‚  â”‚
â”‚  â”‚  â€¢ Deduplicates unchanged data                                â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚         â”‚                              â”‚                             â”‚
â”‚         â–¼                              â–¼                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”‚
â”‚  â”‚  health object   â”‚         â”‚  status object   â”‚                 â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â”‚
â”‚         â”‚                              â”‚                             â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                             â”‚
â”‚                        â–¼                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚              DASHBOARD COMPONENTS                            â”‚  â”‚
â”‚  â”‚                                                               â”‚  â”‚
â”‚  â”‚  1ï¸âƒ£  DashboardSummary                                        â”‚  â”‚
â”‚  â”‚      âœ… Uses: received, published (live rates)               â”‚  â”‚
â”‚  â”‚      âœ… Uses: memory.rss, heapUsed, heapTotal                â”‚  â”‚
â”‚  â”‚      âœ… Uses: mqtt.connected, health.status                  â”‚  â”‚
â”‚  â”‚                                                               â”‚  â”‚
â”‚  â”‚  2ï¸âƒ£  MetricsGrid                                             â”‚  â”‚
â”‚  â”‚      âœ… Uses: received, published, failed, flushes           â”‚  â”‚
â”‚  â”‚      âœ… Uses: circuitBreakerOpen                             â”‚  â”‚
â”‚  â”‚      âŒ Shows: commands (always 0 - UNUSED)                  â”‚  â”‚
â”‚  â”‚      âŒ Shows: messagesInDLQ (always 0 - UNUSED)             â”‚  â”‚
â”‚  â”‚                                                               â”‚  â”‚
â”‚  â”‚  3ï¸âƒ£  MemoryMonitor                                           â”‚  â”‚
â”‚  â”‚      âœ… Uses: memory.percent, rss, heapUsed, heapTotal       â”‚  â”‚
â”‚  â”‚                                                               â”‚  â”‚
â”‚  â”‚  4ï¸âƒ£  BufferMonitor                                           â”‚  â”‚
â”‚  â”‚      âœ… Uses: buffers[].messages, buffers[].utilization      â”‚  â”‚
â”‚  â”‚                                                               â”‚  â”‚
â”‚  â”‚  5ï¸âƒ£  SystemInfo                                              â”‚  â”‚
â”‚  â”‚      âœ… Uses: uptime, mqtt.connected                         â”‚  â”‚
â”‚  â”‚      âœ… Uses: memory.rss, heapUsed, heapTotal                â”‚  â”‚
â”‚  â”‚      âš ï¸  Shows: memory.external, arrayBuffers (low value)    â”‚  â”‚
â”‚  â”‚                                                               â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”„ Metric Update Flow

### âœ… **Active Metrics** (Properly Tracked)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ MQTT Message    â”‚
â”‚ Received        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ handleMQTTMessage()                 â”‚
â”‚ â€¢ Parse message                     â”‚
â”‚ â€¢ Match topic pattern               â”‚
â”‚ â€¢ Extract device ID                 â”‚
â”‚ â€¢ Create Pub/Sub message            â”‚
â”‚ â€¢ addToBuffer(message)              â”‚
â”‚   â”œâ”€â–¶ metrics.received++     âœ…    â”‚
â”‚   â””â”€â–¶ messageLatency.observe() âš ï¸  â”‚  (Prometheus - unused by dashboard)
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Buffer Flush (every 5s or when full)â”‚
â”‚ â€¢ flushMessageBuffer()              â”‚
â”‚   â”œâ”€â–¶ metrics.flushes++      âœ…    â”‚
â”‚   â”‚                                 â”‚
â”‚   â””â”€â–¶ publishBreaker.fire()        â”‚
â”‚       â”œâ”€ Success:                   â”‚
â”‚       â”‚  â€¢ metrics.published++  âœ…  â”‚
â”‚       â”‚  â€¢ publishSuccess.inc() âš ï¸  â”‚  (Prometheus - unused)
â”‚       â”‚                             â”‚
â”‚       â””â”€ Failure:                   â”‚
â”‚          â€¢ metrics.failed++     âœ…  â”‚
â”‚          â€¢ publishFailure.inc() âš ï¸  â”‚  (Prometheus - unused)
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Circuit Breaker Events              â”‚
â”‚ â€¢ on('open')                        â”‚
â”‚   â”œâ”€â–¶ circuitBreakerOpen = true âœ… â”‚
â”‚   â””â”€â–¶ circuitBreakerStatus.set(1) âš ï¸â”‚ (Prometheus - unused)
â”‚                                     â”‚
â”‚ â€¢ on('close')                       â”‚
â”‚   â”œâ”€â–¶ circuitBreakerOpen = false âœ…â”‚
â”‚   â””â”€â–¶ circuitBreakerStatus.set(0) âš ï¸â”‚ (Prometheus - unused)
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### âŒ **Dead Metrics** (Never Updated)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ metrics.commands = 0                â”‚
â”‚                                     â”‚
â”‚ âŒ PROBLEM:                         â”‚
â”‚ â€¢ Command subscription removed      â”‚
â”‚ â€¢ No code increments this counter   â”‚
â”‚ â€¢ Always shows 0 in dashboard       â”‚
â”‚                                     â”‚
â”‚ SOLUTION: Remove from code          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ metrics.messagesInDLQ = 0           â”‚
â”‚                                     â”‚
â”‚ âŒ PROBLEM:                         â”‚
â”‚ â€¢ DLQ functionality removed         â”‚
â”‚ â€¢ No code increments this counter   â”‚
â”‚ â€¢ Always shows 0 in dashboard       â”‚
â”‚                                     â”‚
â”‚ SOLUTION: Remove from code          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“Š Dashboard Polling Cycle

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Every 2 Seconds                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â–¼
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚  useMqttBridgeStatus   â”‚
              â”‚  fetchAll()            â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚                  â”‚
                â–¼                  â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  GET /health     â”‚   â”‚  GET /status     â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚                  â”‚
                â–¼                  â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  Deduplicate (compare JSON strings)      â”‚
    â”‚  â€¢ Only update state if data changed     â”‚
    â”‚  â€¢ Prevents unnecessary re-renders       â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â–¼
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚  Update React State    â”‚
              â”‚  â€¢ setHealth(data)     â”‚
              â”‚  â€¢ setStatus(data)     â”‚
              â”‚  â€¢ setLastUpdate(now)  â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â–¼
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚  Components Re-render  â”‚
              â”‚  (if data changed)     â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ¯ Key Findings

### âœ… **What's Working Well**
1. **Core metrics** (received, published, failed) are properly tracked
2. **Memory monitoring** is comprehensive and useful
3. **Real-time polling** (2s interval) provides good responsiveness
4. **Deduplication** prevents unnecessary updates
5. **Buffer monitoring** shows useful capacity information

### âŒ **What's Not Working**
1. **commands metric** - Never incremented (command subscription removed)
2. **messagesInDLQ metric** - Never incremented (DLQ removed)
3. **Prometheus metrics** - Tracked but never consumed by dashboard

### âš ï¸ **Opportunities for Improvement**
1. Remove dead metrics to reduce cognitive load
2. Consider removing Prometheus if no external monitoring
3. Memory optimization by removing unused tracking
4. Cleaner dashboard (no confusing "0" values)

---

## ğŸ“ References

### MQTT Bridge Endpoints
- **Health:** `https://mqtt-bridge-8158575421.us-central1.run.app/health`
- **Status:** `https://mqtt-bridge-8158575421.us-central1.run.app/status`
- **Metrics:** `https://mqtt-bridge-8158575421.us-central1.run.app/metrics` (Prometheus - unused)

### Key Files
- **Bridge:** `mqtt-bridge/index.js`
- **Hook:** `client/src/pages/admin/AdminDashboard/hooks/useMqttBridgeStatus.ts`
- **Dashboard:** `client/src/pages/admin/AdminDashboard/AdminDashboard.tsx`
- **Components:** `client/src/pages/admin/AdminDashboard/components/`

---

**Created:** November 8, 2025  
**Purpose:** Document metrics data flow for optimization
